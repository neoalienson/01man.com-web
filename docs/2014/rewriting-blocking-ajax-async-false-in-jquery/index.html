<!DOCTYPE html><html><head><meta charset="utf-8"><title>Rewriting blocking AJAX (async: false in JQuery) | Neo's works</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="jasmine,javascript"><meta name="description" content="When I apply jasmine ajax to test a piece of javascript, I was stuck, and found out the cause is no blocking AJAX call supports from jasmine ajax. I do not blame jasmine ajax because I do not think ma"><meta property="og:type" content="article"><meta property="og:title" content="Rewriting blocking AJAX (async: false in JQuery)"><meta property="og:url" content="http://01man.com/2014/rewriting-blocking-ajax-async-false-in-jquery/index.html"><meta property="og:site_name" content="Neo's works"><meta property="og:description" content="When I apply jasmine ajax to test a piece of javascript, I was stuck, and found out the cause is no blocking AJAX call supports from jasmine ajax. I do not blame jasmine ajax because I do not think ma"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2014-12-15T22:31:25.000Z"><meta property="article:modified_time" content="2023-07-06T12:56:01.119Z"><meta property="article:author" content="Neo Alienson"><meta property="article:tag" content="jasmine"><meta property="article:tag" content="javascript"><meta name="twitter:card" content="summary"><link rel="icon" href="/css/neo18-16.png"><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/libs/titillium-web/styles.css"><link rel="stylesheet" href="/libs/source-code-pro/styles.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css"><link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css"><script type="text/javascript">!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","53161362","auto"),ga("send","pageview")</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="wrap"><header id="header"><div id="header-outer" class="outer"><div class="container"><div class="container-inner"><div id="header-title"><h1 class="logo-wrap"><a href="/" class="logo"></a></h1><h2 class="subtitle-wrap"><p class="title">Neo's works</p><p class="subtitle">Design software with better evolvability and profitability</p></h2></div><div id="header-inner" class="nav-container"><a id="main-nav-toggle" class="nav-icon fa fa-bars"></a><div class="nav-container-inner"><ul id="main-nav"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/">Home</a></li><ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Development/">Development</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Hack/">Hack</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Misc/">Misc</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Tech/">Tech</a></li></ul><li class="main-nav-list-item"><a class="main-nav-list-link" href="/about-me">About</a></li></ul><nav id="sub-nav"><div id="search-form-wrap"><form class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Search"> <button type="submit" class="search-form-submit"></button></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..."> <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>!function(T){T.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}}(window)</script></div></nav></div></div></div></div></div></header><div class="container"><div class="main-body container-inner"><div class="main-body-inner"><section id="main"><div class="main-body-header"><h1 class="header"><a class="page-title-link" href="/categories/Development/">Development</a></h1></div><div class="main-body-content"><article id="post-2014/rewriting-blocking-ajax-async-false-in-jquery" class="article article-single article-type-post" itemscope="" itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">Rewriting blocking AJAX (async: false in JQuery)</h1></header><div class="article-meta"><div class="article-date"><i class="fa fa-calendar"></i> <a href="/2014/rewriting-blocking-ajax-async-false-in-jquery/" class="article-date"><time datetime="2014-12-15T22:31:25.000Z" itemprop="datePublished">2014-12-15</time></a></div><div class="article-tag"><i class="fa fa-tag"></i> <a class="tag-link-link" href="/tags/jasmine/" rel="tag">jasmine</a>, <a class="tag-link-link" href="/tags/javascript/" rel="tag">javascript</a></div></div><div class="article-entry" itemprop="articleBody"><p>When I apply jasmine ajax to test a piece of javascript, I was stuck, and found out the cause is no blocking AJAX call supports from jasmine ajax. I do not blame jasmine ajax because I do not think making blocking ajax call make sense at all.</p><p>Almost all developer considers AJAX to be an acronym to stand for Asynchronous. However, the world of AJAX could be complicated to some new learner and it is not uncommon to see AJAX call with blocking. Blocking AJAX call is considered to be a poor practice in most circumference on web, mobile and server platforms. The reason is slightly different on platform, but overall javascripts are single-threaded and any blocking call means cease-functioning. Below is an example of JQuery AJAX call with blocking by <code>async: false</code> (and another anti-pattern, using global variable),</p><pre lang="javascript">var someGlobal = false;

$.ajax({
    type: "GET",
    url: "//somewhere",
    contentType: "application/json; charset=utf-8", 
    async: false,
    success: (function() {
        someGlobal = true;
    })
});

if (someGlobal) {
   // follow-up
}
</pre><p>The above example is easy to follow somehow because it runs step-by-step. Value of <strong>someGlobal</strong> is properly assigned before follow-up. Everything is fine except blocking and using of global variable. Let’s rewrite and see,</p><pre lang="javascript">
$.ajax({
    type: "GET",
    url: "//somewhere",
    contentType: "application/json; charset=utf-8", 
    async:true,
    success: (function() {
        followUp(true);
    }),
    error: (function() {
        followUp(false);
    })
});

// parameter result is renamed from someGlobal
function followUp(result) {
    // follow-up
}
</pre><p>Now the AJAX is not blocked because of <code>async: true</code>. We put code for follow-up into a <code>followUp</code> function. No global variable is needed. In real world this could become callback in chain and this will be discuss later.</p></div><footer class="article-footer"><a data-url="http://01man.com/2014/rewriting-blocking-ajax-async-false-in-jquery/" data-id="clt1m3oof004et9r44ss17n1f" class="article-share-link"><i class="fa fa-share"></i>Share</a><script>!function(t){t("body").on("click",(function(){t(".article-share-box.on").removeClass("on")})).on("click",".article-share-link",(function(e){e.stopPropagation();var a,o=t(this),r=o.attr("data-url"),i=encodeURIComponent(r),s="article-share-box-"+o.attr("data-id"),l=o.offset();if(t("#"+s).length){if((a=t("#"+s)).hasClass("on"))return void a.removeClass("on")}else{var n=['<div id="'+s+'" class="article-share-box">','<input class="article-share-input" value="'+r+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+i+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+i+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+i+'" class="article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+i+'" class="article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join("");a=t(n),t("body").append(a)}t(".article-share-box.on").hide(),a.css({top:l.top+25,left:l.left}).addClass("on")})).on("click",".article-share-box",(function(t){t.stopPropagation()})).on("click",".article-share-box-input",(function(){t(this).select()})).on("click",".article-share-box-link",(function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}))}(jQuery)</script></footer></div><script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "Neo Alienson"
        },
        "headline": "Rewriting blocking AJAX (async: false in JQuery)",
        "image": "http://01man.com",
        "keywords": "jasmine javascript",
        "genre": "Development",
        "datePublished": "2014-12-15",
        "dateCreated": "2014-12-15",
        "dateModified": "2023-07-06",
        "url": "http://01man.com/2014/rewriting-blocking-ajax-async-false-in-jquery/",
        "description": "When I apply jasmine ajax to test a piece of javascript, I was stuck, and found out the cause is no blocking AJAX call supports from jasmine ajax. I do not blame jasmine ajax because I do not think ma",
        "wordCount": 332
    }</script></article></div></section><aside id="sidebar"><a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a><div class="sidebar-top"><p>follow:</p><ul class="social-links"><li><a class="social-tooltip" title="stack-exchange" href="https://stackexchange.com/users/2122053/neo?tab=accounts" target="_blank" rel="noopener"><i class="icon fa fa-stack-exchange"></i></a></li><li><a class="social-tooltip" title="stack-overflow" href="https://stackoverflow.com/users/1885105/neo" target="_blank" rel="noopener"><i class="icon fa fa-stack-overflow"></i></a></li><li><a class="social-tooltip" title="bitbucket" href="https://bitbucket.org/neoalienson/" target="_blank" rel="noopener"><i class="icon fa fa-bitbucket"></i></a></li><li><a class="social-tooltip" title="github" href="https://github.com/neoalienson" target="_blank" rel="noopener"><i class="icon fa fa-github"></i></a></li><li><a class="social-tooltip" title="linkedin" href="/linkedin.com/in/disconnectedout" target="_blank" rel="noopener"><i class="icon fa fa-linkedin"></i></a></li></ul></div><nav id="article-nav"><a href="/2015/cross-building-for-wd-cloud-and-nodejs/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">newer</strong><p class="article-nav-title">Cross-building for WD Cloud and nodejs</p><i class="icon fa fa-chevron-right" id="icon-chevron-right"></i> </a><a href="/2014/google-map-show-traffic-alerts-during-route-planning-in-hong-kong/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">older</strong><p class="article-nav-title">Google Map shows traffic alert during route planning in Hong Kong</p><i class="icon fa fa-chevron-left" id="icon-chevron-left"></i></a></nav><div class="widgets-container"><div class="widget-wrap widget-list"><h3 class="widget-title">links</h3><div class="widget"><ul><li><a href="/pages/Hexo-Blogging-Cheatsheet">Hexo Blogging Cheatsheet</a></li><li><a href="/pages/useful-information">Useful Information</a></li><li><a href="/pages/Open-Data-from-Hong-Kong">Open Data from Hong Kong</a></li><li><a href="/pages/Home-Assistant-REST-sensor-list">Home Assistant REST sensor list</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">recents</h3><div class="widget"><ul id="recent-post"><li><div class="item-thumbnail"><a href="/2023/Everything_as_Code_a_Trend_or_Necessity/" class="thumbnail"><span class="thumbnail-image thumbnail-none"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Development/">Development</a></p><p class="item-title"><a href="/2023/Everything_as_Code_a_Trend_or_Necessity/" class="title">Everything as Code - A Trend or a Necessity?</a></p><p class="item-date"><time datetime="2023-10-28T03:55:01.000Z" itemprop="datePublished">2023-10-28</time></p></div></li><li><div class="item-thumbnail"><a href="/2023/Troulbeshooting_Terraform/" class="thumbnail"><span style="background-image:url(/2023/Troulbeshooting_Terraform/log.png)" alt="Troubleshooting Terraform" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Development/">Development</a></p><p class="item-title"><a href="/2023/Troulbeshooting_Terraform/" class="title">Troubleshooting Terraform</a></p><p class="item-date"><time datetime="2023-09-27T19:41:00.000Z" itemprop="datePublished">2023-09-27</time></p></div></li><li><div class="item-thumbnail"><a href="/2023/GitOps_on_Jenkins/" class="thumbnail"><span class="thumbnail-image thumbnail-none"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Development/">Development</a></p><p class="item-title"><a href="/2023/GitOps_on_Jenkins/" class="title">GitOps on Jenkins Pipelines</a></p><p class="item-date"><time datetime="2023-09-25T02:38:00.000Z" itemprop="datePublished">2023-09-25</time></p></div></li><li><div class="item-thumbnail"><a href="/2023/My_Best_CoPilot_Alternative_Running_LLM_on_Local_Machine/" class="thumbnail"><span style="background-image:url(/2023/My_Best_CoPilot_Alternative_Running_LLM_on_Local_Machine/hero.png)" alt="My Best CoPilot Alternative - Running LLM on Local Machine" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Development/">Development</a></p><p class="item-title"><a href="/2023/My_Best_CoPilot_Alternative_Running_LLM_on_Local_Machine/" class="title">My Best CoPilot Alternative - Running LLM on Local Machine</a></p><p class="item-date"><time datetime="2023-09-03T20:41:00.000Z" itemprop="datePublished">2023-09-03</time></p></div></li><li><div class="item-thumbnail"><a href="/2023/Using_ChatGPT_to_Draw_Sequence_Diagram/" class="thumbnail"><span style="background-image:url(/2023/Using_ChatGPT_to_Draw_Sequence_Diagram/sequence_diagram.png)" alt="Using ChatGPT to Draw Sequence Diagram" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Development/">Development</a></p><p class="item-title"><a href="/2023/Using_ChatGPT_to_Draw_Sequence_Diagram/" class="title">Using ChatGPT to Draw Sequence Diagram</a></p><p class="item-date"><time datetime="2023-05-10T22:12:00.000Z" itemprop="datePublished">2023-05-10</time></p></div></li></ul></div></div><div class="widget-wrap widget-list"><h3 class="widget-title">archives</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">October 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">September 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/07/">July 2008</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/05/">May 2007</a><span class="archive-list-count">1</span></li></ul></div></div><div class="widget-wrap widget-float"><h3 class="widget-title">tag cloud</h3><div class="widget tagcloud"><a href="/tags/3D-printing/" style="font-size:10px">3D printing</a> <a href="/tags/AI/" style="font-size:17.5px">AI</a> <a href="/tags/Android/" style="font-size:12.5px">Android</a> <a href="/tags/Apple/" style="font-size:12.5px">Apple</a> <a href="/tags/Assembly/" style="font-size:10px">Assembly</a> <a href="/tags/Automation/" style="font-size:10px">Automation</a> <a href="/tags/C/" style="font-size:10px">C#</a> <a href="/tags/Fun/" style="font-size:10px">Fun</a> <a href="/tags/GitOps/" style="font-size:10px">GitOps</a> <a href="/tags/Go/" style="font-size:10px">Go</a> <a href="/tags/Google/" style="font-size:10px">Google</a> <a href="/tags/Groovy/" style="font-size:10px">Groovy</a> <a href="/tags/Hacking/" style="font-size:10px">Hacking</a> <a href="/tags/Java/" style="font-size:12.5px">Java</a> <a href="/tags/JavaScript/" style="font-size:10px">JavaScript</a> <a href="/tags/Jenkins/" style="font-size:10px">Jenkins</a> <a href="/tags/Mac/" style="font-size:12.5px">Mac</a> <a href="/tags/MacOS/" style="font-size:10px">MacOS</a> <a href="/tags/Migration/" style="font-size:10px">Migration</a> <a href="/tags/Minecraft/" style="font-size:10px">Minecraft</a> <a href="/tags/MySQL/" style="font-size:10px">MySQL</a> <a href="/tags/PHP/" style="font-size:15px">PHP</a> <a href="/tags/Pyhthon/" style="font-size:10px">Pyhthon</a> <a href="/tags/Serendipity/" style="font-size:10px">Serendipity</a> <a href="/tags/ShellScript/" style="font-size:10px">ShellScript</a> <a href="/tags/Swift/" style="font-size:17.5px">Swift</a> <a href="/tags/Terraform/" style="font-size:15px">Terraform</a> <a href="/tags/Test-Automation/" style="font-size:10px">Test Automation</a> <a href="/tags/Visualization/" style="font-size:10px">Visualization</a> <a href="/tags/Windows-Server/" style="font-size:10px">Windows Server</a> <a href="/tags/WordPress/" style="font-size:10px">WordPress</a> <a href="/tags/arm/" style="font-size:12.5px">arm</a> <a href="/tags/barcode/" style="font-size:10px">barcode</a> <a href="/tags/database/" style="font-size:10px">database</a> <a href="/tags/enterprise/" style="font-size:10px">enterprise</a> <a href="/tags/hackathon/" style="font-size:12.5px">hackathon</a> <a href="/tags/iOS/" style="font-size:20px">iOS</a> <a href="/tags/iPhone/" style="font-size:10px">iPhone</a> <a href="/tags/jasmine/" style="font-size:10px">jasmine</a> <a href="/tags/javascript/" style="font-size:10px">javascript</a> <a href="/tags/nodejs/" style="font-size:12.5px">nodejs</a> <a href="/tags/python/" style="font-size:10px">python</a> <a href="/tags/terraform/" style="font-size:10px">terraform</a> <a href="/tags/wdcloud/" style="font-size:12.5px">wdcloud</a> <a href="/tags/wifi/" style="font-size:10px">wifi</a></div></div></div></aside></div></div></div><footer id="footer"><div class="container"><div class="container-inner"><a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a><div class="credit"><h1 class="logo-wrap"><a href="/" class="logo"></a></h1><p>© 2024 Neo Alienson <a href="/terms-and-conditions">Terms and Condition</a></p></div><div class="footer-plugins"></div></div></div></footer><script>var disqus_shortname="[object Object]",disqus_url="http://01man.com/2014/rewriting-blocking-ajax-async-false-in-jquery/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/count.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML.js"></script></div><script type="text/javascript" src="/js/bundle.js"></script></body></html>